# 密码登录功能实现

## 概述

本次修改为新的Sign组件添加了密码登录功能，使其支持与旧版signin页面相同的密码登录方式。

## 修改内容

### 1. 新增文件

- `frontend/desktop/src/components/v2/usePassword.tsx` - 新的密码登录hook

### 2. 修改文件

- `frontend/desktop/src/components/v2/Sign.tsx` - 在Sign组件中集成密码登录功能

## 功能特性

### 密码登录组件 (usePassword)

- **用户名和密码输入**: 支持用户名和密码的输入验证
- **密码确认**: 对于新用户，支持密码确认功能
- **错误处理**: 完整的错误处理和用户反馈
- **加载状态**: 登录过程中的加载状态显示
- **样式一致性**: 与新的Sign组件设计风格保持一致

### 集成到Sign组件

- **条件渲染**: 根据配置决定是否显示密码登录
- **布局适配**: 与其他登录方式（手机号、邮箱、社交登录）协调显示
- **分隔线**: 在不同登录方式之间添加适当的分隔线

## 配置

密码登录功能通过以下配置控制：

```typescript
conf.authConfig?.idp.password?.enabled
```

默认情况下，密码登录是启用的。

## API接口

密码登录使用以下API接口：

- `passwordExistRequest` - 检查用户是否存在
- `passwordLoginRequest` - 执行密码登录
- `UserInfo` - 获取用户信息

## 样式设计

密码登录组件采用了与Sign组件一致的设计风格：

- 使用Chakra UI组件
- 统一的颜色方案和间距
- 响应式设计
- 现代化的UI元素

## 兼容性

- 与现有的密码登录API完全兼容
- 支持用户注册和登录流程
- 保持与旧版signin页面的功能一致性

## 使用方式

当配置启用密码登录时，用户可以在Sign页面看到：

1. 用户名输入框（带用户图标）
2. 密码输入框（带锁图标）
3. 登录按钮
4. 对于新用户，会显示密码确认页面

密码登录会与其他登录方式（如手机号、邮箱、社交登录）一起显示，用户可以选择任意一种方式进行登录。 